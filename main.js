!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e,t){const i=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),i.textContent=t,i.classList.add(this._errorClass)}_hideInputError(e,t){const i=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),i.classList.remove(this._errorClass),i.textContent=" "}_hasInvalidInput(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_isFormValid(){return this._inputList.every((e=>e.validity.valid))}_toggleButtonState(){this._isFormValid()?(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1):(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._hasInvalidInput(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};class t{constructor(e){this._popupElement=document.querySelector(e),this._handleEscUp=this._handleEscUp.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscUp)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscUp)}_handleEscUp(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close-img"))&&this.close()}))}}var i=class extends t{constructor(e){let{popupSelector:t,handleFormSubmit:i}=e;var r,n,s;super(t),r=this,s=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_handleSubmit"))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,this._handleFormSubmit=i,this._modalForm=this._popupElement.querySelector(".modal__container"),this._modalFormInputs=this._popupElement.querySelectorAll(".modal__input"),this._modalFormButton=this._popupElement.querySelector("modal__container-button")}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",this._handleSubmit)}_getInputValues(){const e={};return this._modalFormInputs.forEach((t=>e[t.name]=t.value)),e}close(){super.close(),this._modalForm.reset()}};const r={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},n=document.querySelector("#add-card-form"),s=new e(r,document.querySelector(".modal").querySelector(".modal__container")),o=new e(r,n),l=document.querySelector("#add-button"),a=document.querySelector(".profile__edit"),c=document.querySelector("#modal-profile-form"),m=c.querySelector("#owner-name"),u=c.querySelector(".modal__description");s.enableValidation(),o.enableValidation();const d=new class{constructor(e){let{profileNameSelector:t,profileDescriptionSelector:i}=e;this._profileNameElement=document.querySelector(t),this._profileDescriptionElement=document.querySelector(i)}setUserInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}getUserInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}}({profileNameSelector:".profile__title",profileDescriptionSelector:".profile__subtitle"});function _(e){const t=new class{constructor(e,t,i){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=i}_setEventListeners(){this._element.querySelector(".card__button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__delete").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick({link:this._link,name:this._name})))}_handleLikeButton(){this._element.querySelector(".card__button").classList.toggle("card__heart_active")}_handleDeleteButton(){this._element.remove()}_handleImagePopup(){this._handleCardClick({name:this._name,link:this._link})}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getElement(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__title").textContent=this._name,this._element.querySelector(".card__image").alt=this._name,this._setEventListeners(),this._element}}(e,"#card-template",(e=>{v.open(e)}));f.addItem(t.getElement())}const h=new i({popupSelector:"#add-card-modal",handleFormSubmit:e=>{let{title:t,link:i}=e;_({name:t,link:i}),h.close()}});h.setEventListeners();const p=new i({popupSelector:"#edit-modal",handleFormSubmit:e=>{d.setUserInfo(e.title,e.description),p.close()}});p.setEventListeners(),a.addEventListener("click",(function(){const{name:e,description:t}=d.getUserInfo();m.value=e,u.value=t,p.open({name:e,description:t})})),l.addEventListener("click",(()=>{h.open(),o.resetValidation()}));const f=new class{constructor(e,t){let{items:i,renderer:r}=e;this._items=i,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://images.unsplash.com/photo-1492305175278-3b3afaa2f31f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1131&q=80"},{name:"Lake Louise",link:"https://images.unsplash.com/photo-1553545616-b592535aa4cd?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{name:"Bald Mountains",link:"https://images.unsplash.com/photo-1631745818498-579a5463598c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1471&q=80"},{name:"Latemar",link:"https://images.unsplash.com/photo-1518733262568-b51ef2fac5b4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"},{name:"Vanoise National Park",link:"https://images.unsplash.com/photo-1601809774049-90a98e3a10c8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=627&q=80"},{name:"Lago Di Braies",link:"https://images.unsplash.com/photo-1601893920895-e3ed4a655d27?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"}],renderer:_},".cards__gallery");f.renderItems();const v=new class extends t{constructor(e){super(e),this._imageModalPreview=this._popupElement.querySelector(".modal__image"),this._textTitlePreview=this._popupElement.querySelector(".modal__image-title")}open(e){let{link:t,name:i}=e;this._imageModalPreview.src=t,this._imageModalPreview.alt=i,this._textTitlePreview.textContent=i,super.open()}}("#image-modal");v.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vY2xlYXIvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2NsZWFyLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vY2xlYXIvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2NsZWFyLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9jbGVhci8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGVhci8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2NsZWFyLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9jbGVhci8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKSk7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KVxuICAgICAgKTtcbiAgfVxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9faGVhcnRfYWN0aXZlXCIpO1xuICB9XG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuICBfaGFuZGxlSW1hZ2VQb3B1cCgpIHtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiIFwiO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBfaXNGb3JtVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faXNGb3JtVmFsaWQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NVcCA9IHRoaXMuX2hhbmRsZUVzY1VwLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NVcCk7XG4gIH1cbiAgX2hhbmRsZUVzY1VwKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1pbWdcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XG4gICAgdGhpcy5fbW9kYWxGb3JtSW5wdXRzID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9tb2RhbEZvcm1CdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwibW9kYWxfX2NvbnRhaW5lci1idXR0b25cIlxuICAgICk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5fbW9kYWxGb3JtSW5wdXRzLmZvckVhY2goXG4gICAgICAoaW5wdXQpID0+IChpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxuICAgICk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgfTtcbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTIzMDUxNzUyNzgtM2IzYWZhYTJmMzFmP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMTMxJnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUzNTQ1NjE2LWI1OTI1MzVhYTRjZD9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTQ3MCZxPTgwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYzMTc0NTgxODQ5OC01NzlhNTQ2MzU5OGM/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE0NzEmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUxODczMzI2MjU2OC1iNTFlZjJmYWM1YjQ/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTczNSZxPTgwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDE4MDk3NzQwNDktOTBhOThlM2ExMGM4P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02MjcmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIERpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDE4OTM5MjA4OTUtZTNlZDRhNjU1ZDI3P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MFwiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgY2FyZE5hbWVGaWVsZDogXCIjY2FyZC1uYW1lXCIsXG4gIGNhcmRMaW5rRmllbGQ6IFwiI2NhcmQtbGlua1wiLFxuICBwcm9maWxlVGl0bGVJbnB1dDogXCIubW9kYWxfX2lucHV0XCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0OiBcIi5tb2RhbF9fZGVzY3JpcHRpb25cIixcbiAgaW1hZ2VQb3B1cDogXCIjaW1hZ2UtbW9kYWxcIixcbiAgY2FyZEFkZFBvcHVwOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBjYXJkQWRkRm9ybTogXCIjYWRkLWNhcmQtZm9ybVwiLFxuICBjYXJkR2FsbGVyeTogXCIuY2FyZHNfX2dhbGxlcnlcIixcbiAgY2FyZFNlbGVjdG9yOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBwcm9maWxlRm9ybVNlbGVjdG9yOiBcIiNtb2RhbC1wcm9maWxlLWZvcm1cIixcbiAgcHJvZmlsZUVkaXRDbG9zZTogXCIubW9kYWxfX2Nsb3NlXCIsXG4gIHByb2ZpbGVFZGl0UG9wdXA6IFwiI2VkaXQtbW9kYWxcIixcbiAgY2FyZEFkZENsb3NlQnV0dG9uOiBcIiNjbG9zZS1idXR0b25cIixcbiAgaW1hZ2VQcmV2aWV3Q2xvc2U6IFwiI2ltYWdlLWNsb3NlXCIsXG4gIHByb2ZpbGVFZGl0T3BlbjogXCIucHJvZmlsZV9fZWRpdFwiLFxuICBjYXJkQWRkQnV0dG9uOiBcIiNhZGQtYnV0dG9uXCIsXG4gIHByb2ZpbGVNb2RhbFNlbGVjdG9yOiBcIi5tb2RhbFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXJcIixcbiAgcG9wdXBTZWxlY3RvcjogXCIubW9kYWxfX29wZW5lZFwiLFxufTtcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG5jb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5wcm9maWxlTW9kYWxTZWxlY3Rvcik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVNlbGVjdG9yKTtcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgY2FyZEFkZEZvcm0pO1xuXG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0XCIpO1xuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGUtZm9ybVwiKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBwcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKFwiI293bmVyLW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19kZXNjcmlwdGlvblwiXG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBjb25maWcucHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IGNvbmZpZy5wcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcixcbn0pO1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIGNvbmZpZy5jYXJkU2VsZWN0b3IsIChkYXRhKSA9PiB7XG4gICAgcHJldmlld1BvcHVwLm9wZW4oZGF0YSk7XG4gIH0pO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0RWxlbWVudCgpKTtcbn1cblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoeyB0aXRsZSwgbGluayB9KSA9PiB7XG4gICAgcmVuZGVyQ2FyZCh7IG5hbWU6IHRpdGxlLCBsaW5rIH0pO1xuXG4gICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIH0sXG59KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS50aXRsZSwgZGF0YS5kZXNjcmlwdGlvbik7XG4gICAgdXNlckluZm9Qb3B1cC5jbG9zZSgpO1xuICB9LFxufSk7XG51c2VySW5mb1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVFZGl0T3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblxuICB1c2VySW5mb1BvcHVwLm9wZW4oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KTtcbn0pO1xuXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG5cbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG5cbiAgY29uZmlnLmNhcmRHYWxsZXJ5XG4pO1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKGNvbmZpZy5pbWFnZVBvcHVwKTtcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcbiAgICApO1xuICB9XG4gIHNldFVzZXJJbmZvKHVzZXJOYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxufVxuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZU1vZGFsUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl90ZXh0VGl0bGVQcmV2aWV3ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIlxuICAgICk7XG4gIH1cbiAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xuICAgIHRoaXMuX2ltYWdlTW9kYWxQcmV2aWV3LnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFByZXZpZXcuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl90ZXh0VGl0bGVQcmV2aWV3LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2hhc0ludmFsaWRJbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pc0Zvcm1WYWxpZCIsIl9pbnB1dExpc3QiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcmVmIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfbW9kYWxGb3JtIiwiX21vZGFsRm9ybUlucHV0cyIsIl9tb2RhbEZvcm1CdXR0b24iLCJfaGFuZGxlU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiZm9ybVNlbGVjdG9yIiwiY2FyZEFkZEZvcm0iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2FyZEFkZEJ1dHRvbiIsInByb2ZpbGVFZGl0T3BlbiIsInByb2ZpbGVGb3JtIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lRWxlbWVudCIsIl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50Iiwic2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsImRlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJyZW5kZXJDYXJkIiwiZGF0YSIsImNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInRvZ2dsZSIsIl9oYW5kbGVJbWFnZVBvcHVwIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldEVsZW1lbnQiLCJzcmMiLCJhbHQiLCJwcmV2aWV3UG9wdXAiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJhZGRDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwidGl0bGUiLCJ1c2VySW5mb1BvcHVwIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiX2ltYWdlTW9kYWxQcmV2aWV3IiwiX3RleHRUaXRsZVByZXZpZXciXSwic291cmNlUm9vdCI6IiJ9